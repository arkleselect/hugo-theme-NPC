<head>
  <!-- å¼•ç”¨ CSS æ–‡ä»¶ -->
  <link rel="stylesheet" href="{{ "css/styles.css" | relURL }}">
  <script>
document.addEventListener('DOMContentLoaded', function () {
      // ä¸»é¢˜åˆ‡æ¢æŒ‰é’®çš„å¤„ç†ç¨‹åº
      const themeToggleButton = document.getElementById('theme-toggle');
      const searchButton = document.getElementById('search-toggle');
      const searchInput = document.querySelector('.search-input');

      // è¯»å–å¹¶åº”ç”¨å­˜å‚¨çš„ä¸»é¢˜
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        document.body.classList.add(savedTheme);
      }

      // ç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†ç¨‹åº
      if (themeToggleButton) {
        themeToggleButton.addEventListener('click', themeToggleHandler);
      }

      if (searchButton) {
        searchButton.addEventListener('click', function () {
          searchInput.classList.toggle('expanded');
          searchInput.focus(); // ç‚¹å‡»æŒ‰é’®æ—¶å°†ç„¦ç‚¹ç§»åŠ¨åˆ°è¾“å…¥æ¡†
        });
      }

      // è®©ç‚¹å‡»è¾“å…¥æ¡†å¤–éƒ¨åŒºåŸŸæ—¶æ”¶èµ·è¾“å…¥æ¡†
      document.addEventListener('click', function (event) {
        if (!searchButton.contains(event.target) && !searchInput.contains(event.target)) {
          searchInput.classList.remove('expanded');
        }
      });
    });

    function themeToggleHandler() {
      console.log("Theme toggle button clicked");

      // åˆ‡æ¢ä¸»é¢˜
      if (document.body.classList.contains('dark-theme')) {
        document.body.classList.remove('dark-theme');
        localStorage.removeItem('theme'); // æ¸…é™¤å­˜å‚¨çš„ä¸»é¢˜
      } else {
        document.body.classList.add('dark-theme');
        localStorage.setItem('theme', 'dark-theme');
      }
    }

  </script>
</head>
<body>
  <header>
    <!-- å¯¼èˆªæ å†…å®¹ -->
    <nav class="navbar">
      <ul class="nav-links">
        <li><a href="/">é¦–é¡µ</a></li>
        <li><a href="/friends">è¯†å‹</a></li>
        <li><a href="/categories">åˆ†ç»„</a></li>
        <li><a href="/about">å…³äº</a></li>
        <li><a href="/more">æ›´å¤š</a></li>
      </ul>
      <div class="searchAndTheme">
      <form id="search-form" class="search-form" action="/search" method="get">
        <input type="text" name="q" placeholder="æœç´¢æ–‡ç« ..." class="search-input">
        <button type="button" id="search-toggle" class="search-button">ğŸ”</button>
      </form>
      <button id="theme-toggle" class="theme-toggle-button">
        <img src="/icons/light-theme-icon.svg" id="light-icon" class="theme-icon" alt="Light Theme Icon">
        <img src="/icons/dark-theme-icon.svg" id="dark-icon" class="theme-icon" alt="Dark Theme Icon">
      </button>
      </div>
    </nav>
  </header>
</body>
